{"id":"CzHF","dependencies":[{"name":"C:\\Users\\Umm Raheil\\Desktop\\h1-usertest\\h1-frontend\\package.json","includedInParent":true,"mtime":1625914906000},{"name":"./App","loc":{"line":1,"column":16},"parent":"C:\\Users\\Umm Raheil\\Desktop\\h1-usertest\\h1-frontend\\src\\Auth.js","resolved":"C:\\Users\\Umm Raheil\\Desktop\\h1-usertest\\h1-frontend\\src\\App.js"},{"name":"./Router","loc":{"line":2,"column":34},"parent":"C:\\Users\\Umm Raheil\\Desktop\\h1-usertest\\h1-frontend\\src\\Auth.js","resolved":"C:\\Users\\Umm Raheil\\Desktop\\h1-usertest\\h1-frontend\\src\\Router.js"},{"name":"./views/partials/splash","loc":{"line":3,"column":19},"parent":"C:\\Users\\Umm Raheil\\Desktop\\h1-usertest\\h1-frontend\\src\\Auth.js","resolved":"C:\\Users\\Umm Raheil\\Desktop\\h1-usertest\\h1-frontend\\src\\views\\partials\\splash.js"},{"name":"lit-html","loc":{"line":4,"column":28},"parent":"C:\\Users\\Umm Raheil\\Desktop\\h1-usertest\\h1-frontend\\src\\Auth.js","resolved":"C:\\Users\\Umm Raheil\\Desktop\\h1-usertest\\h1-frontend\\node_modules\\lit-html\\lit-html.js"},{"name":"./Toast","loc":{"line":5,"column":18},"parent":"C:\\Users\\Umm Raheil\\Desktop\\h1-usertest\\h1-frontend\\src\\Auth.js","resolved":"C:\\Users\\Umm Raheil\\Desktop\\h1-usertest\\h1-frontend\\src\\Toast.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var e=c(require(\"./App\")),t=s(require(\"./Router\")),o=c(require(\"./views/partials/splash\")),r=require(\"lit-html\"),n=c(require(\"./Toast\"));function a(e){if(\"function\"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(a=function(e){return e?o:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var o=a(t);if(o&&o.has(e))return o.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(\"default\"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=n?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(r,s,c):r[s]=e[s]}return r.default=e,o&&o.set(e,r),r}function c(e){return e&&e.__esModule?e:{default:e}}class i{constructor(){this.currentUser={}}async signUp(o){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=await fetch(\"\".concat(e.default.apiBase,\"/user\"),{method:\"POST\",body:o});if(!a.ok){const e=await a.json();e&&console.log(e),n.default.show(\"Problem getting user: \".concat(a.status)),\"function\"==typeof r&&r()}n.default.show(\"Account created, please sign in\"),(0,t.gotoRoute)(\"/signin\")}async signIn(o){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=await fetch(\"\".concat(e.default.apiBase,\"/auth/signin\"),{method:\"POST\",body:o});if(!a.ok){const e=await a.json();e&&console.log(e),n.default.show(\"Problem signing in: \".concat(e.message),\"error\"),\"function\"==typeof r&&r()}const s=await a.json();n.default.show(\"Welcome  \".concat(s.user.firstName)),localStorage.setItem(\"accessToken\",s.accessToken),this.currentUser=s.user,1==s.user.newUser?(0,t.gotoRoute)(\"/guide\"):(0,t.gotoRoute)(\"/\")}async check(n){if((0,r.render)(o.default,e.default.rootEl),!localStorage.accessToken)return void t.default.init();const a=await fetch(\"\".concat(e.default.apiBase,\"/auth/validate\"),{method:\"GET\",headers:{Authorization:\"Bearer \".concat(localStorage.accessToken)}});if(!a.ok){const e=await a.json();return e&&console.log(e),localStorage.removeItem(\"accessToken\"),void t.default.init()}const s=await a.json();this.currentUser=s.user,n(),t.default.init()}signOut(){n.default.show(\"You are signed out\"),localStorage.removeItem(\"accessToken\"),(0,t.gotoRoute)(\"/signin\"),this.currentUser=null}}var u=new i;exports.default=u;"},"sourceMaps":{"js":{"mappings":[{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":0}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":13}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":20}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":35}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":43}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":56}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":57}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":64}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":68}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":76}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":89}},{"source":"Auth.js","original":{"line":1,"column":0},"generated":{"line":1,"column":91}},{"source":"Auth.js","original":{"line":1,"column":0},"generated":{"line":1,"column":95}},{"source":"Auth.js","original":{"line":1,"column":0},"generated":{"line":1,"column":97}},{"source":"Auth.js","original":{"line":1,"column":0},"generated":{"line":1,"column":99}},{"source":"Auth.js","original":{"line":1,"column":0},"generated":{"line":1,"column":107}},{"source":"Auth.js","original":{"line":2,"column":0},"generated":{"line":1,"column":117}},{"source":"Auth.js","original":{"line":2,"column":0},"generated":{"line":1,"column":119}},{"source":"Auth.js","original":{"line":2,"column":0},"generated":{"line":1,"column":121}},{"source":"Auth.js","original":{"line":2,"column":0},"generated":{"line":1,"column":129}},{"source":"Auth.js","original":{"line":3,"column":0},"generated":{"line":1,"column":142}},{"source":"Auth.js","original":{"line":3,"column":0},"generated":{"line":1,"column":144}},{"source":"Auth.js","original":{"line":3,"column":0},"generated":{"line":1,"column":146}},{"source":"Auth.js","original":{"line":3,"column":0},"generated":{"line":1,"column":154}},{"source":"Auth.js","original":{"line":4,"column":0},"generated":{"line":1,"column":182}},{"source":"Auth.js","original":{"line":4,"column":0},"generated":{"line":1,"column":184}},{"source":"Auth.js","original":{"line":4,"column":0},"generated":{"line":1,"column":192}},{"source":"Auth.js","original":{"line":5,"column":0},"generated":{"line":1,"column":204}},{"source":"Auth.js","original":{"line":5,"column":0},"generated":{"line":1,"column":206}},{"source":"Auth.js","original":{"line":5,"column":0},"generated":{"line":1,"column":208}},{"source":"Auth.js","original":{"line":5,"column":0},"generated":{"line":1,"column":216}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":228}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":237}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":239}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":242}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":245}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":264}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":272}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":279}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":284}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":288}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":290}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":294}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":302}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":304}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":308}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":316}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":323}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":325}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":334}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":337}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":344}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":346}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":348}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":352}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":355}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":364}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":366}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":368}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":371}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":375}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":378}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":381}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":383}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":394}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":401}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":403}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":406}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":413}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":416}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":433}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":436}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":455}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":457}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":463}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":464}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":472}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":475}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":479}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":481}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":483}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":486}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":489}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":492}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":494}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":498}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":501}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":508}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":510}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":514}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":517}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":521}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":523}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":526}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":528}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":535}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":551}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":558}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":583}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":587}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":591}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":596}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":598}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":601}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":613}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":616}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":623}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":633}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":648}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":653}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":655}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":658}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":659}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":663}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":665}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":667}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":674}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":699}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":701}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":704}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":709}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":713}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":715}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":720}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":722}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":727}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":734}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":749}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":751}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":753}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":756}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":758}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":761}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":763}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":766}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":773}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":775}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":783}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":785}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":788}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":790}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":794}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":796}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":799}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":801}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":810}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":812}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":815}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":822}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":825}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":827}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":838}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":840}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":841}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":849}},{"source":"Auth.js","original":{"line":7,"column":0},"generated":{"line":1,"column":852}},{"source":"Auth.js","name":"Auth","original":{"line":7,"column":6},"generated":{"line":1,"column":858}},{"source":"Auth.js","name":"constructor","original":{"line":9,"column":2},"generated":{"line":1,"column":860}},{"source":"Auth.js","name":"currentUser","original":{"line":10,"column":9},"generated":{"line":1,"column":874}},{"source":"Auth.js","name":"currentUser","original":{"line":10,"column":9},"generated":{"line":1,"column":879}},{"source":"Auth.js","original":{"line":10,"column":23},"generated":{"line":1,"column":891}},{"source":"Auth.js","name":"signUp","original":{"line":13,"column":8},"generated":{"line":1,"column":894}},{"source":"Auth.js","name":"userData","original":{"line":13,"column":15},"generated":{"line":1,"column":907}},{"source":"Auth.js","name":"fail","original":{"line":13,"column":25},"generated":{"line":1,"column":910}},{"source":"Auth.js","name":"fail","original":{"line":13,"column":25},"generated":{"line":1,"column":914}},{"source":"Auth.js","original":{"line":13,"column":32},"generated":{"line":1,"column":916}},{"source":"Auth.js","original":{"line":13,"column":32},"generated":{"line":1,"column":926}},{"source":"Auth.js","original":{"line":13,"column":32},"generated":{"line":1,"column":933}},{"source":"Auth.js","original":{"line":13,"column":32},"generated":{"line":1,"column":941}},{"source":"Auth.js","original":{"line":13,"column":32},"generated":{"line":1,"column":945}},{"source":"Auth.js","original":{"line":13,"column":32},"generated":{"line":1,"column":955}},{"source":"Auth.js","original":{"line":13,"column":32},"generated":{"line":1,"column":959}},{"source":"Auth.js","original":{"line":13,"column":32},"generated":{"line":1,"column":969}},{"source":"Auth.js","name":"response","original":{"line":14,"column":10},"generated":{"line":1,"column":972}},{"source":"Auth.js","name":"response","original":{"line":14,"column":10},"generated":{"line":1,"column":978}},{"source":"Auth.js","name":"fetch","original":{"line":14,"column":27},"generated":{"line":1,"column":986}},{"source":"Auth.js","name":"App","original":{"line":14,"column":36},"generated":{"line":1,"column":992}},{"source":"Auth.js","name":"App","original":{"line":14,"column":36},"generated":{"line":1,"column":995}},{"source":"Auth.js","name":"App","original":{"line":14,"column":36},"generated":{"line":1,"column":1002}},{"source":"Auth.js","name":"apiBase","original":{"line":14,"column":40},"generated":{"line":1,"column":1004}},{"source":"Auth.js","name":"apiBase","original":{"line":14,"column":40},"generated":{"line":1,"column":1012}},{"source":"Auth.js","original":{"line":14,"column":56},"generated":{"line":1,"column":1020}},{"source":"Auth.js","original":{"line":14,"column":56},"generated":{"line":1,"column":1029}},{"source":"Auth.js","name":"method","original":{"line":15,"column":6},"generated":{"line":1,"column":1030}},{"source":"Auth.js","original":{"line":15,"column":14},"generated":{"line":1,"column":1037}},{"source":"Auth.js","name":"body","original":{"line":16,"column":6},"generated":{"line":1,"column":1044}},{"source":"Auth.js","name":"userData","original":{"line":16,"column":12},"generated":{"line":1,"column":1049}},{"source":"Auth.js","original":{"line":20,"column":7},"generated":{"line":1,"column":1053}},{"source":"Auth.js","name":"response","original":{"line":20,"column":8},"generated":{"line":1,"column":1057}},{"source":"Auth.js","name":"ok","original":{"line":20,"column":17},"generated":{"line":1,"column":1059}},{"source":"Auth.js","original":{"line":20,"column":20},"generated":{"line":1,"column":1062}},{"source":"Auth.js","name":"err","original":{"line":22,"column":12},"generated":{"line":1,"column":1063}},{"source":"Auth.js","name":"err","original":{"line":22,"column":12},"generated":{"line":1,"column":1069}},{"source":"Auth.js","name":"response","original":{"line":22,"column":24},"generated":{"line":1,"column":1077}},{"source":"Auth.js","name":"json","original":{"line":22,"column":33},"generated":{"line":1,"column":1079}},{"source":"Auth.js","name":"err","original":{"line":23,"column":9},"generated":{"line":1,"column":1086}},{"source":"Auth.js","name":"console","original":{"line":23,"column":14},"generated":{"line":1,"column":1089}},{"source":"Auth.js","name":"log","original":{"line":23,"column":22},"generated":{"line":1,"column":1097}},{"source":"Auth.js","name":"err","original":{"line":23,"column":26},"generated":{"line":1,"column":1101}},{"source":"Auth.js","name":"show","original":{"line":25,"column":12},"generated":{"line":1,"column":1104}},{"source":"Auth.js","name":"show","original":{"line":25,"column":12},"generated":{"line":1,"column":1106}},{"source":"Auth.js","name":"show","original":{"line":25,"column":12},"generated":{"line":1,"column":1114}},{"source":"Auth.js","name":"response","original":{"line":25,"column":42},"generated":{"line":1,"column":1119}},{"source":"Auth.js","name":"response","original":{"line":25,"column":42},"generated":{"line":1,"column":1144}},{"source":"Auth.js","name":"response","original":{"line":25,"column":42},"generated":{"line":1,"column":1151}},{"source":"Auth.js","name":"status","original":{"line":25,"column":51},"generated":{"line":1,"column":1153}},{"source":"Auth.js","original":{"line":27,"column":24},"generated":{"line":1,"column":1162}},{"source":"Auth.js","name":"fail","original":{"line":27,"column":16},"generated":{"line":1,"column":1181}},{"source":"Auth.js","name":"fail","original":{"line":27,"column":36},"generated":{"line":1,"column":1184}},{"source":"Auth.js","name":"show","original":{"line":30,"column":10},"generated":{"line":1,"column":1188}},{"source":"Auth.js","name":"show","original":{"line":30,"column":10},"generated":{"line":1,"column":1190}},{"source":"Auth.js","name":"show","original":{"line":30,"column":10},"generated":{"line":1,"column":1198}},{"source":"Auth.js","original":{"line":30,"column":15},"generated":{"line":1,"column":1203}},{"source":"Auth.js","original":{"line":32,"column":14},"generated":{"line":1,"column":1239}},{"source":"Auth.js","original":{"line":32,"column":14},"generated":{"line":1,"column":1241}},{"source":"Auth.js","original":{"line":32,"column":14},"generated":{"line":1,"column":1243}},{"source":"Auth.js","original":{"line":32,"column":14},"generated":{"line":1,"column":1254}},{"source":"Auth.js","name":"signIn","original":{"line":36,"column":8},"generated":{"line":1,"column":1265}},{"source":"Auth.js","name":"userData","original":{"line":36,"column":15},"generated":{"line":1,"column":1278}},{"source":"Auth.js","name":"fail","original":{"line":36,"column":25},"generated":{"line":1,"column":1281}},{"source":"Auth.js","name":"fail","original":{"line":36,"column":25},"generated":{"line":1,"column":1285}},{"source":"Auth.js","original":{"line":36,"column":32},"generated":{"line":1,"column":1287}},{"source":"Auth.js","original":{"line":36,"column":32},"generated":{"line":1,"column":1297}},{"source":"Auth.js","original":{"line":36,"column":32},"generated":{"line":1,"column":1304}},{"source":"Auth.js","original":{"line":36,"column":32},"generated":{"line":1,"column":1312}},{"source":"Auth.js","original":{"line":36,"column":32},"generated":{"line":1,"column":1316}},{"source":"Auth.js","original":{"line":36,"column":32},"generated":{"line":1,"column":1326}},{"source":"Auth.js","original":{"line":36,"column":32},"generated":{"line":1,"column":1330}},{"source":"Auth.js","original":{"line":36,"column":32},"generated":{"line":1,"column":1340}},{"source":"Auth.js","name":"response","original":{"line":37,"column":10},"generated":{"line":1,"column":1343}},{"source":"Auth.js","name":"response","original":{"line":37,"column":10},"generated":{"line":1,"column":1349}},{"source":"Auth.js","name":"fetch","original":{"line":37,"column":27},"generated":{"line":1,"column":1357}},{"source":"Auth.js","name":"App","original":{"line":37,"column":36},"generated":{"line":1,"column":1363}},{"source":"Auth.js","name":"App","original":{"line":37,"column":36},"generated":{"line":1,"column":1366}},{"source":"Auth.js","name":"App","original":{"line":37,"column":36},"generated":{"line":1,"column":1373}},{"source":"Auth.js","name":"apiBase","original":{"line":37,"column":40},"generated":{"line":1,"column":1375}},{"source":"Auth.js","name":"apiBase","original":{"line":37,"column":40},"generated":{"line":1,"column":1383}},{"source":"Auth.js","original":{"line":37,"column":63},"generated":{"line":1,"column":1391}},{"source":"Auth.js","original":{"line":37,"column":63},"generated":{"line":1,"column":1407}},{"source":"Auth.js","name":"method","original":{"line":38,"column":6},"generated":{"line":1,"column":1408}},{"source":"Auth.js","original":{"line":38,"column":14},"generated":{"line":1,"column":1415}},{"source":"Auth.js","name":"body","original":{"line":39,"column":6},"generated":{"line":1,"column":1422}},{"source":"Auth.js","name":"userData","original":{"line":39,"column":12},"generated":{"line":1,"column":1427}},{"source":"Auth.js","original":{"line":43,"column":7},"generated":{"line":1,"column":1431}},{"source":"Auth.js","name":"response","original":{"line":43,"column":8},"generated":{"line":1,"column":1435}},{"source":"Auth.js","name":"ok","original":{"line":43,"column":17},"generated":{"line":1,"column":1437}},{"source":"Auth.js","original":{"line":43,"column":20},"generated":{"line":1,"column":1440}},{"source":"Auth.js","name":"err","original":{"line":45,"column":12},"generated":{"line":1,"column":1441}},{"source":"Auth.js","name":"err","original":{"line":45,"column":12},"generated":{"line":1,"column":1447}},{"source":"Auth.js","name":"response","original":{"line":45,"column":24},"generated":{"line":1,"column":1455}},{"source":"Auth.js","name":"json","original":{"line":45,"column":33},"generated":{"line":1,"column":1457}},{"source":"Auth.js","name":"err","original":{"line":46,"column":9},"generated":{"line":1,"column":1464}},{"source":"Auth.js","name":"console","original":{"line":46,"column":14},"generated":{"line":1,"column":1467}},{"source":"Auth.js","name":"log","original":{"line":46,"column":22},"generated":{"line":1,"column":1475}},{"source":"Auth.js","name":"err","original":{"line":46,"column":26},"generated":{"line":1,"column":1479}},{"source":"Auth.js","name":"show","original":{"line":48,"column":12},"generated":{"line":1,"column":1482}},{"source":"Auth.js","name":"show","original":{"line":48,"column":12},"generated":{"line":1,"column":1484}},{"source":"Auth.js","name":"show","original":{"line":48,"column":12},"generated":{"line":1,"column":1492}},{"source":"Auth.js","name":"err","original":{"line":48,"column":40},"generated":{"line":1,"column":1497}},{"source":"Auth.js","name":"err","original":{"line":48,"column":40},"generated":{"line":1,"column":1520}},{"source":"Auth.js","name":"err","original":{"line":48,"column":40},"generated":{"line":1,"column":1527}},{"source":"Auth.js","name":"message","original":{"line":48,"column":44},"generated":{"line":1,"column":1529}},{"source":"Auth.js","original":{"line":48,"column":55},"generated":{"line":1,"column":1538}},{"source":"Auth.js","original":{"line":50,"column":24},"generated":{"line":1,"column":1547}},{"source":"Auth.js","name":"fail","original":{"line":50,"column":16},"generated":{"line":1,"column":1566}},{"source":"Auth.js","name":"fail","original":{"line":50,"column":36},"generated":{"line":1,"column":1569}},{"source":"Auth.js","name":"data","original":{"line":54,"column":10},"generated":{"line":1,"column":1573}},{"source":"Auth.js","name":"data","original":{"line":54,"column":10},"generated":{"line":1,"column":1579}},{"source":"Auth.js","name":"response","original":{"line":54,"column":23},"generated":{"line":1,"column":1587}},{"source":"Auth.js","name":"json","original":{"line":54,"column":32},"generated":{"line":1,"column":1589}},{"source":"Auth.js","name":"show","original":{"line":55,"column":10},"generated":{"line":1,"column":1596}},{"source":"Auth.js","name":"show","original":{"line":55,"column":10},"generated":{"line":1,"column":1598}},{"source":"Auth.js","name":"show","original":{"line":55,"column":10},"generated":{"line":1,"column":1606}},{"source":"Auth.js","name":"data","original":{"line":55,"column":27},"generated":{"line":1,"column":1611}},{"source":"Auth.js","name":"data","original":{"line":55,"column":27},"generated":{"line":1,"column":1623}},{"source":"Auth.js","name":"data","original":{"line":55,"column":27},"generated":{"line":1,"column":1630}},{"source":"Auth.js","name":"user","original":{"line":55,"column":32},"generated":{"line":1,"column":1632}},{"source":"Auth.js","name":"firstName","original":{"line":55,"column":37},"generated":{"line":1,"column":1637}},{"source":"Auth.js","name":"localStorage","original":{"line":57,"column":4},"generated":{"line":1,"column":1649}},{"source":"Auth.js","name":"setItem","original":{"line":57,"column":17},"generated":{"line":1,"column":1662}},{"source":"Auth.js","original":{"line":57,"column":25},"generated":{"line":1,"column":1670}},{"source":"Auth.js","name":"data","original":{"line":57,"column":40},"generated":{"line":1,"column":1684}},{"source":"Auth.js","name":"accessToken","original":{"line":57,"column":45},"generated":{"line":1,"column":1686}},{"source":"Auth.js","name":"currentUser","original":{"line":59,"column":9},"generated":{"line":1,"column":1699}},{"source":"Auth.js","name":"currentUser","original":{"line":59,"column":9},"generated":{"line":1,"column":1704}},{"source":"Auth.js","name":"data","original":{"line":59,"column":23},"generated":{"line":1,"column":1716}},{"source":"Auth.js","name":"user","original":{"line":59,"column":28},"generated":{"line":1,"column":1718}},{"source":"Auth.js","original":{"line":63,"column":30},"generated":{"line":1,"column":1723}},{"source":"Auth.js","name":"data","original":{"line":63,"column":9},"generated":{"line":1,"column":1726}},{"source":"Auth.js","name":"user","original":{"line":63,"column":14},"generated":{"line":1,"column":1728}},{"source":"Auth.js","name":"newUser","original":{"line":63,"column":19},"generated":{"line":1,"column":1733}},{"source":"Auth.js","original":{"line":64,"column":16},"generated":{"line":1,"column":1742}},{"source":"Auth.js","original":{"line":64,"column":16},"generated":{"line":1,"column":1744}},{"source":"Auth.js","original":{"line":64,"column":16},"generated":{"line":1,"column":1746}},{"source":"Auth.js","original":{"line":64,"column":16},"generated":{"line":1,"column":1757}},{"source":"Auth.js","original":{"line":66,"column":16},"generated":{"line":1,"column":1768}},{"source":"Auth.js","original":{"line":66,"column":16},"generated":{"line":1,"column":1770}},{"source":"Auth.js","original":{"line":66,"column":16},"generated":{"line":1,"column":1772}},{"source":"Auth.js","original":{"line":66,"column":16},"generated":{"line":1,"column":1783}},{"source":"Auth.js","name":"check","original":{"line":71,"column":8},"generated":{"line":1,"column":1788}},{"source":"Auth.js","name":"success","original":{"line":71,"column":14},"generated":{"line":1,"column":1800}},{"source":"Auth.js","original":{"line":76,"column":7},"generated":{"line":1,"column":1803}},{"source":"Auth.js","name":"splash","original":{"line":73,"column":11},"generated":{"line":1,"column":1807}},{"source":"Auth.js","name":"splash","original":{"line":73,"column":11},"generated":{"line":1,"column":1809}},{"source":"Auth.js","name":"splash","original":{"line":73,"column":11},"generated":{"line":1,"column":1811}},{"source":"Auth.js","name":"splash","original":{"line":73,"column":11},"generated":{"line":1,"column":1819}},{"source":"Auth.js","original":{"line":73,"column":4},"generated":{"line":1,"column":1821}},{"source":"Auth.js","name":"App","original":{"line":73,"column":19},"generated":{"line":1,"column":1829}},{"source":"Auth.js","name":"rootEl","original":{"line":73,"column":23},"generated":{"line":1,"column":1831}},{"source":"Auth.js","name":"rootEl","original":{"line":73,"column":23},"generated":{"line":1,"column":1839}},{"source":"Auth.js","name":"localStorage","original":{"line":76,"column":8},"generated":{"line":1,"column":1848}},{"source":"Auth.js","name":"accessToken","original":{"line":76,"column":21},"generated":{"line":1,"column":1861}},{"source":"Auth.js","original":{"line":81,"column":6},"generated":{"line":1,"column":1873}},{"source":"Auth.js","name":"init","original":{"line":80,"column":13},"generated":{"line":1,"column":1885}},{"source":"Auth.js","name":"init","original":{"line":80,"column":13},"generated":{"line":1,"column":1887}},{"source":"Auth.js","name":"init","original":{"line":80,"column":13},"generated":{"line":1,"column":1895}},{"source":"Auth.js","name":"response","original":{"line":85,"column":10},"generated":{"line":1,"column":1902}},{"source":"Auth.js","name":"response","original":{"line":85,"column":10},"generated":{"line":1,"column":1908}},{"source":"Auth.js","name":"fetch","original":{"line":85,"column":27},"generated":{"line":1,"column":1916}},{"source":"Auth.js","name":"App","original":{"line":85,"column":36},"generated":{"line":1,"column":1922}},{"source":"Auth.js","name":"App","original":{"line":85,"column":36},"generated":{"line":1,"column":1925}},{"source":"Auth.js","name":"App","original":{"line":85,"column":36},"generated":{"line":1,"column":1932}},{"source":"Auth.js","name":"apiBase","original":{"line":85,"column":40},"generated":{"line":1,"column":1934}},{"source":"Auth.js","name":"apiBase","original":{"line":85,"column":40},"generated":{"line":1,"column":1942}},{"source":"Auth.js","original":{"line":85,"column":65},"generated":{"line":1,"column":1950}},{"source":"Auth.js","original":{"line":85,"column":65},"generated":{"line":1,"column":1968}},{"source":"Auth.js","name":"method","original":{"line":86,"column":6},"generated":{"line":1,"column":1969}},{"source":"Auth.js","original":{"line":86,"column":14},"generated":{"line":1,"column":1976}},{"source":"Auth.js","name":"headers","original":{"line":87,"column":6},"generated":{"line":1,"column":1982}},{"source":"Auth.js","original":{"line":87,"column":15},"generated":{"line":1,"column":1990}},{"source":"Auth.js","name":"localStorage","original":{"line":88,"column":35},"generated":{"line":1,"column":1991}},{"source":"Auth.js","name":"localStorage","original":{"line":88,"column":35},"generated":{"line":1,"column":2005}},{"source":"Auth.js","name":"localStorage","original":{"line":88,"column":35},"generated":{"line":1,"column":2015}},{"source":"Auth.js","name":"localStorage","original":{"line":88,"column":35},"generated":{"line":1,"column":2022}},{"source":"Auth.js","name":"accessToken","original":{"line":88,"column":48},"generated":{"line":1,"column":2035}},{"source":"Auth.js","original":{"line":93,"column":7},"generated":{"line":1,"column":2051}},{"source":"Auth.js","name":"response","original":{"line":93,"column":8},"generated":{"line":1,"column":2055}},{"source":"Auth.js","name":"ok","original":{"line":93,"column":17},"generated":{"line":1,"column":2057}},{"source":"Auth.js","original":{"line":93,"column":20},"generated":{"line":1,"column":2060}},{"source":"Auth.js","name":"err","original":{"line":95,"column":12},"generated":{"line":1,"column":2061}},{"source":"Auth.js","name":"err","original":{"line":95,"column":12},"generated":{"line":1,"column":2067}},{"source":"Auth.js","name":"response","original":{"line":95,"column":24},"generated":{"line":1,"column":2075}},{"source":"Auth.js","name":"json","original":{"line":95,"column":33},"generated":{"line":1,"column":2077}},{"source":"Auth.js","original":{"line":103,"column":6},"generated":{"line":1,"column":2084}},{"source":"Auth.js","name":"err","original":{"line":96,"column":9},"generated":{"line":1,"column":2091}},{"source":"Auth.js","name":"console","original":{"line":96,"column":14},"generated":{"line":1,"column":2094}},{"source":"Auth.js","name":"log","original":{"line":96,"column":22},"generated":{"line":1,"column":2102}},{"source":"Auth.js","name":"err","original":{"line":96,"column":26},"generated":{"line":1,"column":2106}},{"source":"Auth.js","name":"localStorage","original":{"line":98,"column":6},"generated":{"line":1,"column":2109}},{"source":"Auth.js","name":"removeItem","original":{"line":98,"column":19},"generated":{"line":1,"column":2122}},{"source":"Auth.js","original":{"line":98,"column":30},"generated":{"line":1,"column":2133}},{"source":"Auth.js","name":"init","original":{"line":102,"column":13},"generated":{"line":1,"column":2153}},{"source":"Auth.js","name":"init","original":{"line":102,"column":13},"generated":{"line":1,"column":2155}},{"source":"Auth.js","name":"init","original":{"line":102,"column":13},"generated":{"line":1,"column":2163}},{"source":"Auth.js","name":"data","original":{"line":107,"column":10},"generated":{"line":1,"column":2170}},{"source":"Auth.js","name":"data","original":{"line":107,"column":10},"generated":{"line":1,"column":2176}},{"source":"Auth.js","name":"response","original":{"line":107,"column":23},"generated":{"line":1,"column":2184}},{"source":"Auth.js","name":"json","original":{"line":107,"column":32},"generated":{"line":1,"column":2186}},{"source":"Auth.js","name":"currentUser","original":{"line":110,"column":9},"generated":{"line":1,"column":2193}},{"source":"Auth.js","name":"currentUser","original":{"line":110,"column":9},"generated":{"line":1,"column":2198}},{"source":"Auth.js","name":"data","original":{"line":110,"column":23},"generated":{"line":1,"column":2210}},{"source":"Auth.js","name":"user","original":{"line":110,"column":28},"generated":{"line":1,"column":2212}},{"source":"Auth.js","name":"success","original":{"line":112,"column":4},"generated":{"line":1,"column":2217}},{"source":"Auth.js","name":"init","original":{"line":113,"column":11},"generated":{"line":1,"column":2221}},{"source":"Auth.js","name":"init","original":{"line":113,"column":11},"generated":{"line":1,"column":2223}},{"source":"Auth.js","name":"init","original":{"line":113,"column":11},"generated":{"line":1,"column":2231}},{"source":"Auth.js","name":"signOut","original":{"line":116,"column":2},"generated":{"line":1,"column":2238}},{"source":"Auth.js","name":"show","original":{"line":117,"column":10},"generated":{"line":1,"column":2248}},{"source":"Auth.js","name":"show","original":{"line":117,"column":10},"generated":{"line":1,"column":2250}},{"source":"Auth.js","name":"show","original":{"line":117,"column":10},"generated":{"line":1,"column":2258}},{"source":"Auth.js","original":{"line":117,"column":15},"generated":{"line":1,"column":2263}},{"source":"Auth.js","name":"localStorage","original":{"line":119,"column":4},"generated":{"line":1,"column":2285}},{"source":"Auth.js","name":"removeItem","original":{"line":119,"column":17},"generated":{"line":1,"column":2298}},{"source":"Auth.js","original":{"line":119,"column":28},"generated":{"line":1,"column":2309}},{"source":"Auth.js","original":{"line":121,"column":14},"generated":{"line":1,"column":2325}},{"source":"Auth.js","original":{"line":121,"column":14},"generated":{"line":1,"column":2327}},{"source":"Auth.js","original":{"line":121,"column":14},"generated":{"line":1,"column":2329}},{"source":"Auth.js","original":{"line":121,"column":14},"generated":{"line":1,"column":2340}},{"source":"Auth.js","name":"currentUser","original":{"line":123,"column":9},"generated":{"line":1,"column":2351}},{"source":"Auth.js","name":"currentUser","original":{"line":123,"column":9},"generated":{"line":1,"column":2356}},{"source":"Auth.js","original":{"line":123,"column":23},"generated":{"line":1,"column":2368}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":2374}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":2378}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":2380}},{"source":"Auth.js","name":"Auth","original":{"line":127,"column":19},"generated":{"line":1,"column":2384}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":2386}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":2394}},{"source":"Auth.js","original":{"line":127,"column":15},"generated":{"line":1,"column":2402}}],"sources":{"Auth.js":"import App from './App'\nimport Router, { gotoRoute } from './Router'\nimport splash from './views/partials/splash'\nimport {html, render } from 'lit-html'\nimport Toast from './Toast'\n\nclass Auth {\n\n  constructor(){\n    this.currentUser = {}\n  }\n  \n  async signUp(userData, fail = false){  \n    const response = await fetch(`${App.apiBase}/user`, {\n      method: 'POST',      \n      body: userData\n    })\n\n    // if response not ok\n    if(!response.ok){      \n      // console log error\n      const err = await response.json()\n      if(err) console.log(err)\n      // show error      \n      Toast.show(`Problem getting user: ${response.status}`)   \n      // run fail() functon if set\n      if(typeof fail == 'function') fail()\n    }\n    /// sign up success - show toast and redirect to sign in page\n    Toast.show('Account created, please sign in')        \n    // redirect to signin\n    gotoRoute('/signin')\n  }\n\n\n  async signIn(userData, fail = false){\n    const response = await fetch(`${App.apiBase}/auth/signin`, {\n      method: 'POST',      \n      body: userData\n    })\n\n    // if response not ok\n    if(!response.ok){\n      // console log error\n      const err = await response.json()\n      if(err) console.log(err)\n      // show error      \n      Toast.show(`Problem signing in: ${err.message}`, 'error')   \n      // run fail() functon if set\n      if(typeof fail == 'function') fail()\n    }\n\n    // sign in success\n    const data = await response.json()\n    Toast.show(`Welcome  ${data.user.firstName}`)\n    // save access token (jwt) to local storage\n    localStorage.setItem('accessToken', data.accessToken)\n    // set current user\n    this.currentUser = data.user      \n    // console.log(this.currentUser)           \n    // redirect to home\n     // if the user is a new user direct to guide page - otherwise home page\n     if (data.user.newUser == true){\n      gotoRoute('/guide')\n    }else{\n      gotoRoute('/')\n    }\n  }\n\n\n  async check(success){\n    // show splash screen while loading ...   \n    render(splash, App.rootEl)\n    \n    // check local token is there\n    if(!localStorage.accessToken){\n      // no local token!\n  //    Toast.show(\"Please sign in\")    \n      // redirect to sign in page      \n      Router.init()\n      return\n    }\n    \n    // token must exist - validate token via the backend\n    const response = await fetch(`${App.apiBase}/auth/validate`, {\n      method: 'GET',\n      headers: {        \n        \"Authorization\": `Bearer ${localStorage.accessToken}`\n      }\n    })\n    \n    // if response not ok\n    if(!response.ok){             \n      // console log error\n      const err = await response.json()\n      if(err) console.log(err)\n      // delete local token\n      localStorage.removeItem('accessToken')\n //     Toast.show(\"session expired, please sign in\")\n      // redirect to sign in      \n //     gotoRoute('/signin')\n      Router.init()\n      return\n    }\n    \n    // token is valid!\n    const data = await response.json()\n    // console.log(data)\n    // set currentUser obj\n    this.currentUser = data.user\n    // run success\n    success()\n    Router.init()\n  }\n\n  signOut(){\n    Toast.show(\"You are signed out\")\n    // delete local token\n    localStorage.removeItem('accessToken')       \n    // redirect to sign in    \n    gotoRoute('/signin')\n    // unset currentUser\n    this.currentUser = null\n  }\n}\n\nexport default new Auth()"},"lineCount":null}},"error":null,"hash":"87e0c1be5916666d78ea09b08f433b8f","cacheData":{"env":{}}}